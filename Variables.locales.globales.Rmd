---
title: "Variables locales et globales"
author: "Ellie Tideswell and Jeremy Bornerieux"
date: "6 September 2019"
output:
  ioslides_presentation: default
  slidy_presentation: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Notion d'environnement

*R est un language orienté objet ce qui veut dire que les variables et les fonctions sont des objets*

- Un environement sert comme espace de stockage de ces objets
- un objet = un nom (ex:a) associé à une valeure (ex:1)
- on distingue l'environement locale et global
- R sauvegarde automatiquement une copie de l'environement global en fermant R

## Variables globales 

- Déclarées hors d'une fonction
- Peuvent être accedées et modifiées à partir de n'importe où dans le programme
- Assigner une variable globale de l'intérieur d'une fonction avec "a <<- 2" 
- Fonction ls() permet d'identifier toutes les variables dans le workspace actuel

## Supprimer des variables
- Supprimer les variables 
```
 "rm(list=ls())"
```
    Suprimer les fonctions en laissant les variables
  ```
  "rm(list=lsf.str())"
  ```
    Suprimer les variables en laissant les fonctions
  ```
  "rm(list = setdiff(ls(), lsf.str()))"
  ```
  
- Fonction "assign" permet de definir l'environnement d'affectation d'une variable globale
      Ex envir = .GlobalEnv
        assign(x = "x", 
        value = x + 1, 
        envir = .GlobalEnv)


## Variables locales
- Variables locales masquent les variables globales de meme nom 
- Déclarées à l'intérieur d'une fonction, dont on peut chercher au sein de leur environnement avec : 

```
get('var', envir=test.env)
```


## Variables libres ("Free variables")
- Trouvées à l'intérieur d'une fonction, mais ne sont pas définies par la fonction comme arguments, R va chercher la valeur de ces variables dans l'environnement où ils étaient crées


## Cas particulier: Package

- Utiliser un package avec library revient à travailler avec un nouvel environnement
- cet environement doit être rechargé à chaque ouverture de r
- il contient les fonctions et les données du package

![](Captureenvir.PNG)



## Parametres de fonctions



```{r }

a<-1

fun<-function(x){
a<-10
return(x+a)
}
fun(1)
a

```


## Parametres de fonctions

```{r }

a<-1

fun<-function(x){

return(x+a)
}
fun(1)
a

```

## Parametres de fonctions

```{r }

a<-1

fun<-function(x){
a<<-10
return(x+a)
}
fun(1)
a

```


## Parametres de fonctions

```{r }

a<-1
x<-100
fun<-function(x=1){

return(x+a)
}
fun()
a

```

## Manipuler un environement

*On peut creer et remplir d'autres environements*


```{r }
a<-1
env2<-new.env()
assign("a",2,envir=env2)

a

get("a",envir=env2)

env2$b<-2
env2$b
```

## Interet d'un nouvel environement
